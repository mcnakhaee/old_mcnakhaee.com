---
title: "R Notebook"
output: html_notebook

---



```{r}
library(tidyverse)
```


## Scatterplot With Encircling
When presenting the results, sometimes I would encirlce certain special group of points or region in the chart so as to draw the attention to those peculiar cases. This can be conveniently done using the geom_encircle() in ggalt package.

```{r}
install.packages('ggalt')
#or
#devtools::install_github("hrbrmstr/ggalt")

```


```{r}
house  <- read_csv('D:\\Data\\house price prediction\\train.csv')
head(house)
```


```{r}
library(ggalt)
selected_points <- house[
                           house$SalePrice>600000,]
house %>% 
  mutate(BedroomAbvGr = as.factor(BedroomAbvGr)) %>% 
  ggplot(aes(MasVnrArea ,SalePrice, color = BedroomAbvGr)) +
  geom_point(alpha = 0.5)+
    geom_encircle(aes(x = MasVnrArea, y = SalePrice ),
                data = selected_points,
                color = 'blue',
                size = 2,
                expand = 0.02)
```

It can be drawn using geom_point(). Additionally, geom_smooth which draws a smoothing line (based on loess) by default, can be tweaked to draw the line of best fit by setting method='lm'
```{r}

```

```{r}

house %>% 
  mutate(BedroomAbvGr = as.factor(BedroomAbvGr)) %>% 
  ggplot(aes(MasVnrArea ,SalePrice, color = BedroomAbvGr,group=1)) +
  geom_point(alpha = 0.5)+
    geom_smooth(method = 'lm', se =FALSE)
```
## Jitter Plot

نتونستم geom_smooth

```{r}
house %>% 
  mutate(BedroomAbvGr = as.factor(BedroomAbvGr)) %>% 
  ggplot(aes(BedroomAbvGr ,SalePrice,color = BedroomAbvGr)) +
  geom_point(alpha = 0.5)+
  geom_jitter()+
    geom_smooth(method = 'lm') 
```

## Counts Chart
The second option to overcome the problem of data points overlap is to use what is called a counts chart. Whereever there is more points overlap, the size of the circle gets bigger.

```{r}
house %>% 
  mutate(BedroomAbvGr = as.factor(BedroomAbvGr)) %>% 
  ggplot(aes(BedroomAbvGr ,SalePrice,color = BedroomAbvGr),alpha = 0.5) +
  geom_count(show.legend = FALSE)
```
## Bubble plot
if you want to understand relationship within the underlying groups based on:

A Categorical variable (by changing the color) and
Another continuous variable (by changing the size of points).
In simpler words, bubble charts are more suitable if you have 4-Dimensional data where two of them are numeric (X and Y) and one other categorical (color) and another numeric variable (size).
```{r}
ubaar  <- read_csv('E:\\Muhammad\\GDrive\\datasets\\R\\train.csv')
head(ubaar)
```
```{r}
library(ggthemes)
ubaar %>% 
  slice(1:1000)%>% 
  ggplot(aes(distanceKM, price),alpha = 0.5) +
  geom_jitter(aes(col = vehicleOption,size = weight)) +
  geom_smooth(aes(col = vehicleOption),method = 'lm',se  = FALSE) +
  theme_minimal()
  
  

 
 
```





## Animated Bubble chart
using the gganimate package

```{r}
library(gapminder)

ubaar %>% 
  slice(1:1000)%>% 
  ggplot(aes(distanceKM, price,color = vehicleOption),alpha = 0.5) +
  geom_point()+
  transition_states(vehicleOption,
    transition_length = 2,
    state_length = 1) +  
    enter_fade() + 
    exit_shrink()

```

## Marginal Histogram / Boxplot

If you want to show the relationship as well as the distribution in the same chart, use the marginal histogram. It has a histogram of the X and Y variables at the margins of the scatterplot.

This can be implemented using the ggMarginal() function from the ‘ggExtra’ package. 
Apart from a histogram, you could choose to draw a marginal boxplot or density plot by setting the respective type option.
#خروجی نمیده؟
```{r}
library(ggExtra)
g <- ubaar %>% 
  slice(1:1000)%>% 
  ggplot(aes(distanceKM, price,color = vehicleOption),alpha = 0.5) +
  geom_point()
ggMarginal(g,type = 'histogram')


```


##Correlogram
 xamine the corellation of multiple continuous variables present in the same dataframe. This is conveniently implemented using the ggcorrplot package.
```{r}
#devtools::install_github("kassambara/ggcorrplot")
library(ggcorrplot)

head(ubaar)
ubaar %>% 
  select(distanceKM,taxiDurationMin,weight,price) %>%
  filter(!is.na(taxiDurationMin))%>%
  cor() %>% 
  ggcorrplot(hc.order = TRUE,
             type = 'lower',
             lab = TRUE,
             lab_size = 3,
             method =  'circle',
             colors =c('indianred','chocolate',"springgreen3"),
             ggtheme = theme_minimal)
             
             
```
 
 ## Deviation
 
 Compare variation in values between small number of items (or categories) with respect to a fixed reference.
 Diverging Bars is a bar chart that can handle both negative and positive values. This can be implemented by a smart tweak with geom_bar(). 

